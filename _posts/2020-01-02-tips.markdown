---
layout:     post
title:      "Tips"
subtitle:   "一些杂乱的笔记"
date:       2020-01-02 10:30:00
author:     "Mike Lyou"
header-img: "img/post-bg-2015.jpg"
tags:

excerpt: Some tips.
---

Some tips discoverd. Write down for later usage. If something is good, a new post will be published.

<!-- more -->

## Catalog
{:.no_toc}
*  
{:toc}

## Back-to-top button

Powered by [vanilla-back-to-top](https://github.com/vfeskov/vanilla-back-to-top/tree/v7.2.1). Thanks for that.

- Included `back-to-top.html` in `default.html`.

- Downloaded `vanilla-back-to-top.min.js`.


## 解决花括号在 Jekyll 被识别成 Liquid 代码的问题

在解决 [#Add Valine comment block](#Add-Valine-comment-block) 时遇到的。

最简单的方法
![](\img\in-post\post-liquid-raw-01.png)

更好的方法（？）
![](\img\in-post\post-liquid-raw-02.png)

为什么上面直接放图了呢？因为我直接这样写的话 `raw` 和 `endraw` 并不会显示，那么要怎么写才能显示上面的代码呢？（[禁止禁止禁止禁止禁止禁止禁止禁止套娃！](https://zh.moegirl.org/zh-hans/禁止套娃)）

Ref:
- [在Jekyll的markdown代码块中转义双大括号](https://stackoom.com/question/1d89y/在Jekyll的markdown代码块中转义双大括号)


## Add Valine comment block

I've struggled adding Disqus for a long time, but still nothing achieved. Though not decide to give up Disqus, I found Valine, and sucessfully add it to my blog in only one hour.

In `_config.yml` write this
```
# Valine settings
valine_appId: your AppID
valine_appKey: your AppKey
```

In `_post.html` write this

<!-- {% raw %} -->
```
{% if site.valine_appId %}
<!--valine comment function (mikelyou)-->
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<div id="comment"></div>
<!--valine comment function end (mikelyou)-->
{% endif %}
```
<!-- {% endraw %} -->

and

{% raw %}
```
{% if site.valine_appId %}
<!--载入js，在</body>之前插入即可-->
<script>
    var valine = new Valine();
    valine.init({
        el:'#comment',
        appId:'{{site.valine_appId}}',
        appKey:'{{site.valine_appKey}}',
        notify:false,
        path: '{{ page.url }}',
        placeholder:'Write comments here~'
    })
</script>
<!--valine comment function end-->
{% endif %}
```
{% endraw %}

where Disqus and netease_comment code appears.

Ref:
- [Valine Official](https://valine.js.org)
- [jekyll 添加 Valine 评论](https://blog.csdn.net/lindexi_gd/article/details/83176116) (brief and effective)
- [Valine: 独立博客评论系统](https://deserts.io/diy-a-comment-system/)
- [Valine Admin 配置手册](https://deserts.io/valine-admin-document/)
- [Valine评论系统](https://www.oukohou.wang/2018/12/18/notices-for-jekyll-themes-fork/#4-valine评论系统) (good example)


## Insert catalog

It is eazy to insert catalog in jekyll.

Simply write the following line where you want to display the catalog:
```
*  
{:toc}
```

If you don't want some heading to show. Add the following line below that heading.

```
## Catalog <!--I dont want it appears in itself-->
{:.no_toc}

*  
{:toc}
```

Ref:
- [给JEKYLL的文章添加目录](http://www.zhengjiachao.com/topics/github.io/add-outline-on-jekyll-post.html)


## Customized excerpts

The excerpts (or abstract) will appear at the list of posts, and those auto-generated excerpts are not so beautiful.
Here are two ways to customize the excerpts.

#### Way-1: Adding `excerpt` variable.

Adding the following line in `_config.yml`.

```
excerpt_separator:  '<!-- more -->'
```

<!-- {% raw %} -->
Go to `index.html`, change `{{ post.content }}` to

```
{{ post.excerpt }}
```
<!-- {% endraw %} -->

Now we can set the end of auto-generated excerprt by adding `<!-- more -->` in our posts，like this:

```
---
layout:     post
title:      "Tips"
<!-- And Many things -->
#excerpt: Write your excerpt here.
---

The excerpt.

<!-- more -->

The main content.
```

The excerpt shows at homepage will be:
```
The excerpt.
```
#### Way-2: Write it directly in posts.

You may notice there is an `excerpt` variable in the head of the example post above.

We can simply write our excerpts there. And this will **disable auto-generated excerpts**.

```
excerpt: Write your excerpt here.
```

And it will show like this:

```
Write your excerpt here.
```

#### Trivia

If you declear `excerpt_separator` at `_config.yml`, and declear `excerpt` at head of posts at the same time, the later one will be in effect.

Ref:
- [使用Jekyll官方的ReadMore摘要功能](https://blog.coderzh.com/2015/08/15/JekyllReadMore/)
- [Jekyll文章列表摘要设置](https://moonagic.com/configure-the-jekyll-article-list-summary/)


## 修复双重滚动条的bug
因为Hux自己的博客一直在修改，稳定的模板现在已经比他的博客落后很多个版本，而在这过程中发现甚至已经解决的问题依然存在在模板里。

这时候，有两种方法都可以尝试：一、看看Hux本人最新的模板添加了什么内容，看看版本更新日志，如果版本差异太大，考虑直接复制新模板；二、查看issue里有没有同样的问题。

双重滚动条的问题就在[#issues](https://github.com/Huxpro/huxpro.github.io/issues/123)被解决过了，解决方法也很简单。

## 如何预览草稿

这里直接参见[官方文档](http://jekyllcn.com/docs/drafts/)。如果看不太懂，我来翻译一下：


- 第一步：你需要在网站根目录下创建一个名为`_drafts`文件夹（因为`_posts`也是在根目录下的，所以`_drafts`理应与`_posts`同级），把草稿放入这个文件夹下。

```
|-- _posts/
|-- _drafts/
|   |-- a-draft-post.md
```

- 第二步：运行`jekyll serve --drafts`即可（或`jekyll build --drafts`）

```
jekyll serve            # 普通的 jekyll 服务器搭建
jekyll serve --drafts   # 显示草稿的 jekyll 服务器搭建
```
